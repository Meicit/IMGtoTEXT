<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Clipboard OCR Web</title>
<style>
    body { font-family: Arial, sans-serif; text-align: center; padding: 20px; }
    #imagePreview { max-width: 300px; border: 1px solid #ccc; margin: 10px auto; }
    textarea { width: 90%; height: 200px; margin-top: 10px; }
    button { margin: 5px; padding: 8px 12px; font-size: 14px; }
</style>
</head>
<body>

<h2>📋 Clipboard OCR Web</h2>
<p>Dán ảnh vào đây (Ctrl+V) để nhận dạng chữ.</p>
<img id="imagePreview" alt="Ảnh từ clipboard" />
<br>
<textarea id="textOutput" placeholder="Kết quả OCR sẽ hiển thị ở đây..."></textarea><br>
<button onclick="copyText()">📄 Copy kết quả</button>

<script src="https://cdn.jsdelivr.net/npm/tesseract.js@5/dist/tesseract.min.js"></script>
<script>
document.addEventListener("paste", async (event) => {
    const items = event.clipboardData.items;
    for (let item of items) {
        if (item.type.startsWith("image/")) {
            const blob = item.getAsFile();
            const url = URL.createObjectURL(blob);
            document.getElementById("imagePreview").src = url;

            // OCR với Tesseract.js
            const { data: { text } } = await Tesseract.recognize(blob, 'eng+vie');
            document.getElementById("textOutput").value = text.replace(/~/g, "-");
        }
    }
});

function copyText() {
    const text = document.getElementById("textOutput").value;
    navigator.clipboard.writeText(text).then(() => {
        alert("✅ Đã copy kết quả!");
    });
}
</script>

</body>
</html>
