<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Clipboard OCR Web</title>
<style>
    body { font-family: Arial, sans-serif; text-align: center; padding: 20px; }
    #imagePreview { max-width: 300px; border: 1px solid #ccc; margin: 10px auto; display: none; }
    textarea { width: 90%; height: 200px; margin-top: 10px; }
    button { margin: 5px; padding: 8px 12px; font-size: 14px; cursor: pointer; }
</style>
</head>
<body>

<h2>ğŸ“‹ Clipboard OCR Web</h2>
<p>DÃ¡n áº£nh vÃ o Ä‘Ã¢y (Ctrl+V), sau Ä‘Ã³ báº¥m "Nháº­n dáº¡ng OCR".</p>

<img id="imagePreview" alt="áº¢nh tá»« clipboard" />
<br>
<button onclick="runOCR()">ğŸ” Nháº­n dáº¡ng OCR</button>
<button onclick="copyText()">ğŸ“„ Copy káº¿t quáº£</button>
<br>
<textarea id="textOutput" placeholder="Káº¿t quáº£ OCR sáº½ hiá»ƒn thá»‹ á»Ÿ Ä‘Ã¢y..."></textarea>

<script src="https://cdn.jsdelivr.net/npm/tesseract.js@5/dist/tesseract.min.js"></script>
<script>
let imageBlob = null;

// Nháº­n áº£nh tá»« clipboard
document.addEventListener("paste", (event) => {
    const items = event.clipboardData.items;
    for (let item of items) {
        if (item.type.startsWith("image/")) {
            imageBlob = item.getAsFile();
            const url = URL.createObjectURL(imageBlob);
            const img = document.getElementById("imagePreview");
            img.src = url;
            img.style.display = "block";
            document.getElementById("textOutput").value = "";
        }
    }
});

// Cháº¡y OCR khi báº¥m nÃºt
async function runOCR() {
    if (!imageBlob) {
        alert("âŒ ChÆ°a cÃ³ áº£nh tá»« clipboard. HÃ£y Ctrl+V trÆ°á»›c.");
        return;
    }
    document.getElementById("textOutput").value = "â³ Äang xá»­ lÃ½ OCR...";
    const { data: { text } } = await Tesseract.recognize(imageBlob, 'eng+vie');
    document.getElementById("textOutput").value = text.replace(/~/g, "-");
}

// Copy text
function copyText() {
    const text = document.getElementById("textOutput").value;
    navigator.clipboard.writeText(text).then(() => {
        alert("âœ… ÄÃ£ copy káº¿t quáº£!");
    });
}
</script>

</body>
</html>
